services:
  catalog-service:
    build:
      context: ./services/catalog-service
      dockerfile: CatalogService/Dockerfile
    ports:
      - "5179:8080"   # http
    environment:
      - ASPNETCORE_ENVIRONMENT=Development
      - DOTNET_RUNNING_IN_CONTAINER=true
      - Jwt__Issuer=https://cyecesagvggsxmrfryse.supabase.co/auth/v1
      - Jwt__Audience=authenticated
      - JWT_SECRET=${JWT_SECRET}
      - SUPABASE_URL=${SUPABASE_URL}
      - SUPABASE_KEY=${SUPABASE_KEY}
      - SUPABASE_SERVICE_KEY=${SUPABASE_SERVICE_KEY}

  order-service:
    build:
      context: ./services
      dockerfile: OrderService/Dockerfile
    ports:
      - "5180:8080"
    environment:
      - ASPNETCORE_ENVIRONMENT=Development
      - DOTNET_RUNNING_IN_CONTAINER=true
      - Jwt__Issuer=https://cyecesagvggsxmrfryse.supabase.co/auth/v1
      - Jwt__Audience=authenticated
      - JWT_SECRET=${JWT_SECRET}
      - SUPABASE_URL=${SUPABASE_URL}
      - SUPABASE_KEY=${SUPABASE_KEY}
      - SUPABASE_SERVICE_KEY=${SUPABASE_SERVICE_KEY}
